(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1098:function(e,n,t){"use strict";t.r(n);var s,o=t(19),r=t(20),a=t(22),c=t(23),i=t(24),u=t(1),d=t.n(u),p=t(33),f=t(212),v=t(758),m=t.n(v),l=t(6),h=t.n(l),g=t(13),S=t(37),C="http://".concat("localhost",":").concat(8888),E=(s=Object(S.a)(h.a.mark(function e(n,t){var s;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(g.a)({},t,{headers:Object(g.a)({},t.headers)}),e.abrupt("return",fetch(C+n,s));case 2:case"end":return e.stop()}},e,this)})),function(e,n){return s.apply(this,arguments)}),I=function(e){function n(e){var t;Object(o.a)(this,n),(t=Object(a.a)(this,Object(c.a)(n).call(this,e))).state={message:"",conversation:{}},t.getConversationFriend=function(e){var n=t.props,s=n.user,o=n.friends;return e===s.myId?s.fullName:o[e].fullName},t.getMappedMessages=function(){return t.props.messages?t.props.messages.map(function(e){var n=e._id,s=e.text,o=e.createdAt,r=e.userId;return{_id:n,text:s,createdAt:o,user:{_id:r,name:t.getConversationFriend(r)}}}).reverse():[]},t._onSend=function(e){var n=t.props.user;t.socket.emit("message",{conversationId:t.props.conversations.currentConversationId,text:"asdf",senderId:n.myId,receiverId:"userid2",createdAt:new Date})},t._onCreatConversation=function(){};return t.socket=m()("http://".concat("localhost",":").concat("3000")),t.socket.emit("init",{senderId:"userid2"}),t.socket.on("message",function(e){console.log(e)}),t}return Object(i.a)(n,e),Object(r.a)(n,[{key:"componentWillMount",value:function(){}},{key:"componentWillUnmount",value:function(){this.socket.emit("disconnect",{senderId:this.props.user.myId})}},{key:"render",value:function(){return d.a.createElement("div",null,d.a.createElement(f.a,{onClick:this._onCreatConversation()},"conversation"),d.a.createElement(f.a,{onClick:this._onSend},"message"))}}]),n}(d.a.Component);I.navigationOptions=function(e){e.navigation;return{title:"Chat"}};n.default=Object(p.b)(function(e){return{user:{myId:"userid1"},messages:e.messages[e.conversations.currentConversationId],friends:e.friends.friends,conversations:e.conversations,conversation:e.conversations[e.conversations.currentConversationId]}},function(e){return{onLoadMessages:function(n){e(function(e){return function(n){return E("/messages/".concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){e.error?n((e.message,{type:"LOAD_MESSAGES_FAILURE"})):n(function(e){var n=e.messages;return{type:"LOAD_MESSAGES_SUCCESS",id:e.id,messages:n}}(e))}).catch(function(e){console.log(e)}),{type:"LOAD_MESSAGES"}}}(n))},onSendMessage:function(n,t){e(function(e,n){return{type:"SEND_MESSAGE",conversationId:e,message:n}}(n,t))}}})(I)},767:function(e,n){}}]);
//# sourceMappingURL=9.a458cba3.chunk.js.map